# Created: 14|8|2021
# Description: check domains
# Script: subdomains_check.py
# Command: python script ip file-input
# Requirement: Requests(module)





import requests 
import sys
import time

try:
    sys.argv[2]
except IndexError:
    print("# Command: python script file-input")
    print("# eg: python script 10.10.10.10 wordlist.txt")
    quit()

subdoms = open(sys.argv[2]).read().splitlines()

print("\n# Start %s at " %(sys.argv[0]) + time.strftime("%H:%M:%S %m.%d.%Y", time.localtime()))
print("# Host:", sys.argv[1])


for sub in subdoms:
    sys.stdout.flush() 
    sub_domains = f"http://{sub}.{sys.argv[1]}" 
    
    try:
            requests.get(sub_domains, timeout=1)
              
    except requests.ConnectionError:
        pass
    else:
        print("Valid subdomain: " + sub_domains + "\n")
else:
    print("# Script done at " + time.strftime("%H:%M:%S %m.%d.%Y", time.localtime()) + "\n")


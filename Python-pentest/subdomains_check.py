# Created: 14|8|2021
# Description: check domains
# Script: subdomains_check.py
# Command: python script file-input
# Requirement: Requests(module)

# ! In task2, this script not working (just demo), we'll can be checking with script subdomains_check_icmp (ICMP protocol)



import requests 
import sys
import time
 
subdoms = open(sys.argv[1]).read().splitlines()

print("\n# Start %s at " %(sys.argv[0]) + time.strftime("%H:%M:%S %m.%d.%Y", time.localtime()))
print("# Host:", sys.argv[2])


for sub in subdoms:
    sys.stdout.flush() 
    sub_domains = f"http://{sub}.{sys.argv[1]}" 
    count+=1
    r = requests.get(sub_domains)
    
    try:
            requests.get(sub_domains)
              
    except requests.ConnectionError:
        pass
    else:
        print("Valid subdomain: " + sub_domains + "\n")
else:
    print("# Script done at " + time.strftime("%H:%M:%S %m.%d.%Y", time.localtime()) + "\n")


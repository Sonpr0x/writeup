# 23:22|14|8|2021
# Copied scipt from Python pentest room
# Check subdomains alive
# Command: script [domain] [file]

# Required funcs: time created/done, calculate time

import requests 
import sys

sub_list = open(sys.argv[2])
subdoms = sub_list.read().splitlines()
valid_list = open(sys.argv[3], "a+")
count = 0

for sub in subdoms:
    sub_domains = f"http://{sub}.{sys.argv[1]}" 
    count+=1
    r = requests.get(sub_domains)
    
    try:
            requests.get(sub_domains)
              
    except requests.ConnectionError:
        print(count + "Invalid subdomain: " + sub_domains + "\n") 
        pass
    else:
        valid_list.writelines("Valid subdomain: " + sub_domains + "\n")
else:
    print("Done")
    sub_list.close()
    valid_list.close()
    
